---
index: 11
title: 適用於Mac OS的PGP
---
# 適用於MAC OS的PGP 工具指南

適用於Mac的加密電子郵件

**課程內容如下：
- [電子郵件](umbrella://communications/email)**  
**下載位置：**
 - [GPG套件](https://gpgtools.org/)
- [Mozilla Thunderbird](https://www.mozilla.org/thunderbird/)
- [Enigmail](https://www.enigmail.net/home/index.php)
**計算機要求：**互聯網連接，運行Mac OS的計算機，和電子郵件帳戶
**本指南中使用的版本：**
- GPG Suite Beta 4
- Mozilla Thunderbird 31.2.0
- Enigmail 1.7.2
**許可證：**免費軟件;混合使用自由軟件許可證
**程度：**進階課程
**其他參考資料：** [http://support.gpgtools.org/](http://support.gpgtools.org/)
**所需時間：** 30-60分鐘

**使用PGP會給你：**
- 保護電子郵件通信不被除預期收件人之外的任何人閱讀的能力。
- 能夠證明電子郵件來自特定的人，而不是由另一個發件人發送的虛假郵件（否則電子郵件很容易被製作）。如果您成為監視或錯誤信息的目標，這兩者都是重要的防禦措施。

**注意：**如果您擔心在2018年5月報告漏洞後PGP加密電子郵件可能變得不安全，請閱讀我們的[電子郵件](umbrella://communications/email)進階課程的Efail部分。

### 1.0 開始之前

要使用Pretty Good Privacy（PGP），您需要安裝一些可與您當前的電子郵件程序配合使用的額外軟件。您還需要創建一個私鑰，您將保密。您將使用私鑰解密發送給您的電子郵件，並對您發送的電子郵件進行數字簽名，以顯示它們真正來自您。最後，您將學習如何分發您的公鑰 - 在他們向您發送加密郵件之前，他們需要知道的一小部分信息，以及他們可以用來驗證您發送的電子郵件。

本指南將向您展示如何將PGP與Apple Mac（但不是iPad或iPhone）一起使用，使用Mac的內置Mail程序，或使用流行的替代電子郵件程序Mozilla Thunderbird。

設定現有的電子郵件地址,請選點 "Skip this and use my existing email“,然後輸入你的名字,電子郵件、密碼.

**請注意，電子郵件會話的兩端都需要使用與PGP兼容的軟件方可能進行操作。**

人們通常只在自己的個人設備上使用它，而不是在共享設備上。幸運的是，PGP適用於大多數台式計算機和移動設備，您可以將它們指向這些指南以幫助他們設置自己的版本。本指南適用於Mac用戶。

### 2.0 在Mac上安裝GPGTools

PGP是一個開放標準，這意味著不止一個軟件可以使用它。我們將用於PGP的軟件稱為GPG套件，來自GPG工具，因為它適用於Mac，任何人都可以免費使用，而且它是開源的：任何人都可以查看基礎源代碼以查找錯誤和後門。

安裝GPG Suite後，您可以首次設置密鑰，然後在Apple郵件和Thunderbird上啟用PGP。

**步驟1：安裝程序。**

首先，在瀏覽器中訪問[https://www.gpgtools.org/](https://www.gpgtools.org/)，然後選擇"下載GPG套件。![圖像](tool_pgposx1.png)

您最終會得到一個可以單擊以安裝軟件的磁盤映像。如果您不習慣在計算機上安裝第三方軟件，請詢問附近的Mac專家 - 這是大多數技術人員可以幫助您的步驟，即使他們不了解PGP或加密。![圖像](tool_pgposx2.png)

單擊“安裝”將為您提供將添加到計算機的工具列表。![圖像](tool_pgposx3.png)

** _我到底安裝了什麼？_ **

這些工具將主要在幕後工作，以便Mac上的多個程序可以使用PGP。將它們視為其他程序可以使用的程序，而不是您將直接使用的應用程序。 GPGMail允許Apple Mail發送和讀取PGP電子郵件，GPG Keychain Access允許您保存私鑰和公鑰，就像在Mac上保存其他密碼一樣。

GPGServices可選擇向OS X添加一項功能，以便您直接在電子郵件以外的程序中使用PGP（例如，在文字處理程序中）。 GPGPreferences用於更改Apple首選項中的PGP設置。最後，MacGPG2是任何程序需要用來進行加密或簽名的基本工具。

2014年10月，GPG工具團隊宣布他們將很快收取GPGMail的費用，GPGMail是其軟件包的一部分，可讓您將GPG與Apple的Mail應用程序一起使用。本教程是關於將GPG與Thunderbird一起使用的，因此它不使用該組件。如果您願意，可以使用GPG Suite的零成本部分，如此處所述。此選項具有額外的好處，即所有這些工具都是“自由軟件”，這意味著您仍然可以自由檢查，編輯和重新分發GPG Mail的基礎源代碼，因此它們更加安全。有關更多信息，請參閱GPG工具的[自己的常見問題解答](https://gpgtools.org/news.html)。


點擊“繼續”以安裝GPG套件。![圖像](tool_pgposx4.png)

安裝完成後，打開GPG Keychain（在應用程序文件夾中找到），如果它沒有自動打開，並提示您在安裝後生成PGP密鑰。單擊“新建”以生成PGP密鑰。
![圖像](tool_pgposx5.png)

**步驟2：創建PGP密鑰**

有時，當您安裝新軟件時，您的計算機會糾纏您沒有明顯答案的問題，而實際上並沒有就如何回复提供任何建議。這是其中一次。

花一點時間思考你在這裡給出的答案是很重要的，因為以後更改你的PGP密鑰細節可能很困難，如果你選擇在某個地方發布你的密鑰，你將無法取消發布它。 （從1990年代開始，仍然有成千上萬的舊公鑰，其中包含那些製作它們的人的姓名和舊電子郵件地址。）

PGP密鑰包含將密鑰鏈接到您的名稱和電子郵件地址。電子郵件地址將是其他人在向您加密消息時可以發現使用哪個密鑰的方式之一。

** _何時不應將我的真實姓名或電子郵件地址放在我的PGP密鑰上？什麼時候不應上傳我的鑰匙？_ **

對於大多數人來說，為您的密鑰添加一個真實的電子郵件地址並將其上傳到公共密鑰服務器是有意義的 - 人們將如何將正確的密鑰與您匹配。他們可以直接向您發送電子郵件，並知道它將使用正確的密鑰加密，當他們收到您簽名的電子郵件時，數字簽名將標有您的姓名。

但是，對於某些人來說，將您的真實姓名添加到您的密鑰中是沒有意義的，例如，如果您的威脅模型意味著將您的身份公開附加到您的密鑰（以及鏈接的電子郵件地址）不是一個好主意。愛德華·斯諾登在透露自己的身份之前，曾使用PGP和匿名電子郵件地址與記者進行溝通;他的PGP鑰匙當然沒有標明他的名字。

**上傳密鑰是正常做法，但即使您不使用自己的名字，它也可能表明您正在使用加密。此外，正如我們所看到的，其他人可能會上傳您的密鑰並將自己的密鑰與之關聯，這意味著您和他們之間存在聯繫。如果您正在溝通並且不希望人們知道它，這可能是有害的。如果你沒有溝通，它也會很麻煩，但你的攻擊者希望人們認為你是關聯的。**

這是一個粗略的指導原則：如果您正在考慮使用假名，請在標記密鑰時使用該假名（和替代電子郵件）。如果您處於更危險的環境中，當您不希望別人知道您正在使用PGP，或者知道您正在與誰通信時，請不要將您的密鑰上傳到公共密鑰服務器 - 並確保小與您溝通的一群人知道不要上傳您的密鑰。還有其他方法可以驗證不依賴於公鑰服務器上可用密鑰的密鑰 - 請參閱EFF的[密鑰驗證]指南
(https://ssd.eff.org/en/module/key-verification#overlay=en/node/37/)了解更多信息。

如果您希望讓其他人快速找到您的密鑰，以便他們可以向您發送加密郵件，請單擊“生成後上傳公鑰”框。這就像將您的電話號碼添加到公共電話目錄：雖然您不需要它，但它對其他人來說極爲方便。

在生成密鑰之前，請展開“進階選項”。您可以將註釋留空，並保留鍵類型“RSA和RSA（默認）”。但請務必將“長度”字段更改為4096。
![圖像](tool_pgposx6.png)

**您的密鑰將在特定時間到期; 當發生這種情況時，其他人將完全停止使用它來發送給您的新電子郵件，儘管您可能無法獲得有關原因的任何警告或解釋。因此，您可能希望在到期日期前一個月左右標記日曆並注意此問題。**

可以通過為現有密鑰提供新的，更晚的到期日期來延長現有密鑰的生命週期，或者可以通過從頭創建一個新密鑰來替換它。這兩個過程可能都需要聯繫給您發送電子郵件的人，並確保他們獲得更新的密鑰;目前的軟件並不擅長自動化。所以提醒自己;如果您認為自己無法管理它，可以考慮設置密鑰以使其永不過期，但在這種情況下，即使您不再使用，其他人也可能會在將來與您聯繫時嘗試使用該密鑰。擁有私鑰或不再使用PGP。

準備好後，單擊“生成密鑰”按鈕。

您的計算機將開始生成您的公鑰和私鑰。完成它不應該花上幾分鐘的時間（這需要一段時間，因為要創建你的密鑰，計算機需要收集隨機數。試著把它想像成是您的計算機，其多次擲一對骰子。）![圖像](tool_pgposx7.png)

當您完成生成密鑰後，您將看到GPG Keychain Access中列出的密鑰。您可以雙擊密鑰以查看有關它的信息，包括其“指紋” - 一種識別PGP密鑰的獨特方式。

現在是生成吊銷證書的好時機。 （吊銷證書是一個可以生成的文件，宣告您不再信任該密鑰。當您仍然擁有密鑰時生成它，並保留它以用於任何未來的災難。）將來，如果您擔心您的私鑰已被某人復制，您不小心刪除或丟失了您的私鑰，或者您忘記了密碼，您可以通過使用吊銷證書告訴每個人它已被撤銷或取消。

現在最好創建一個，因為您需要私鑰和密碼來創建吊銷證書。如果你把它留到以後，你可能會失去一個或那個，然後就太晚了。因此，通過單擊您的密鑰，選擇“密鑰”菜單條目，然後選擇“創建吊銷證書”來創建證書。系統將提示您輸入保存文件的位置。您可能希望使用密鑰的備份副本（請參閱下一步）。

**步驟3：備份PGP密鑰**

如果您失去對私鑰的訪問權限，您將無法解密任何傳入的PGP郵件或舊郵件。另一方面，您希望盡可能安全地保護您的私鑰。

您可能希望將備份副本保存到USB密鑰，然後將其保密。在您丟失了原始密鑰的情況下，您才只需要用到它，但為了安全起見，您需要將其從潛在攻擊者手中奪走。

** _如果攻擊者抓住我的PGP私鑰，一切都會丟失嗎？_ **

如果您的Mac被盜，或者您的備份密鑰是從您那裡拿走的，該怎麼辦？這是否意味著您的PGP消息容易受到攻擊？不是：如果你選擇了一個好的密碼並且沒有人能夠知道它是什麼，你仍然應該受到大多數保護。為安全起見，您可能需要撤銷舊密鑰，並創建新的PGP密鑰。這不會阻止您的舊密鑰解密您的舊電子郵件，但它會阻止其他人使用舊密鑰將新電子郵件發送給您。


要備份密鑰，請打開GPG鑰匙串存取。選擇您的密鑰，然後單擊工具欄中的“導出”。將USB驅動器放入機器中，然後在“另存為...”對話框的“位置”部分中選擇它。選中“允許密鑰導出”複選框。

**選項A) 配置Apple郵件 **

首次打開Apple Mail時，您將看到第一個運行嚮導，可幫助您設置電子郵件地址。填寫您的姓名，電子郵件地址和電子郵件密碼，然後單擊“創建”。![圖像](tool_pgposx8.png)

**郵件帳戶設置嚮導**

如果您使用Gmail等熱門免費電子郵件服務，則當您點擊“繼續”時，Mail應該能夠自動檢測您的電子郵件設置。如果沒有，您可能需要手動配置IMAP和SMTP設置。與您用於發送電子郵件的公司交談，或詢問熟悉您的電子郵件提供商的技術人員（因此，工作中的IT人員或使用與您相同的ISP的技術朋友。他們不需要了解PGP ，但你可以問他們“你能為我設置Apple Mail嗎？”）。
![圖像](tool_pgposx9.png)

**郵件帳戶設置自動檢測**



當您撰寫新郵件時，“主題”字段下方有兩個圖標。有一個掛鎖（加密電子郵件）和一個星（數字簽名電子郵件）。如果掛鎖已關閉，則表示此電子郵件將被加密，如果該明星已簽入，則表示此電子郵件將進行數字簽名。


**發送PGP簽名或加密電子郵件** ![圖像](tool_pgposx10.png)

即使收件人不使用PGP，您也可以隨時簽署您的電子郵件。由於數字簽名電子郵件需要您的密鑰，因此當您第一次簽署電子郵件時，Mail會彈出一個窗口，詢問您的密碼。

如果您發送電子郵件的人使用PGP並且您擁有該人的公鑰，則您只能加密電子郵件。如果加密掛鎖圖標已解鎖並且顯示為灰色，因此您無法單擊它，這意味著您首先需要導入收件人的公鑰。要么讓他們發送給您，要么使用GPG Keychain Access應用程序從公鑰服務器中找到密鑰。

為了絕對安全，您需要驗證從密鑰服務器或您的同事那裡獲得的密鑰。有關詳細信息，請參閱EFF的[密鑰驗證]
(https://ssd.eff.org/en/module/key-verification#overlay=en/node/37/)指南。

**選項B) 將PGP與Mozilla Thunderbird一起使用**

本演練演示如何將GPG與來自Mozilla的免費開源Thunderbird郵件客戶端一起使用，以及用於電子郵件加密的Enigmail插件。

首先，從[https://www.mozilla.org/thunderbird](http://www.mozilla.org/thunderbird)
下載Thunderbird，像安裝GPG Tools一樣安裝磁盤映像，然後將Thunderbird拖到應用程序中。當您第一次打開它時，它會詢問您是否要將其設置為默認電子郵件客戶端。繼續，然後單擊“設為默認值”。![圖像](tool_pgposx11.png)

然後你會看到第一個運行嚮導。要設置現有的電子郵件地址，請單擊“跳過此並使用我現有的電子郵件”。然後在您的電子郵件帳戶中輸入您的姓名，電子郵件地址和密碼。![圖像](tool_pgposx12.png)

如果您使用Gmail等流行的免費電子郵件服務，Thunderbird應該能夠在您單擊繼續時自動檢測您的電子郵件設置。如果沒有，您可能需要手動配置您的IMAP和SMTP設置 - 請向您的ISP或知道設置電子郵件的技術朋友尋求幫助。有時，Thunderbird可以猜出正確的設置。

**如果您對Google使用雙因素身份驗證（根據您的威脅模型，您可能應該這樣做！），您無法在Thunderbird中使用標準Gmail密碼。相反，您需要為Thunderbird創建一個新的應用程序專用密碼才能訪問您的Gmail帳戶。有關此操作，請參閱[Google自己的指南](https://support.google.com/mail/answer/1173270?hl=en)。**
![圖像](tool_pgposx13.png)

通過完成配置Thunderbird檢查電子郵件後，單擊“完成”。然後單擊左上角的“收件箱”以加載電子郵件。

現在您已經安裝並配置了Thunderbird以使用您的電子郵件，您需要安裝[Enigmail](https://www.enigmail.net/home/index.php)，這是適用於Thunderbird的GPG插件。在Thunderbird中，單擊右上角的功能表圖標，然後選擇插件。![圖像](tool_pgposx14.png)

在右上角的搜索框中搜索“enigmail”。![圖像](tool_pgposx15.png)

單擊Enigmail擴展旁邊的“安裝”按鈕以下載並安裝Enigmail。完成後，單擊“立即重啟”以重新啟動Thunderbird。

第一次使用Enigmail運行Thunderbird時，它會使OpenPGP設置嚮導打開。點擊“取消”。我們將手動配置Enigmail。

單擊功能表按鈕，將鼠標懸停在“首選項”上，然後選擇“帳戶設置” ![圖像](tool_pgposx16.png)

轉到OpenPGP安全選項卡。確保選中“為此標識啟用OpenPGP支持（Enigmail）”。應選擇“使用特定的OpenPGP密鑰ID”，如果尚未選擇密鑰，則可以單擊“選擇密鑰”將其選中。

您還應該選中“默認情況下簽署未加密的郵件”，“默認情況下簽署加密的郵件”和“默認使用PGP / MIME”，但不能（對大多數人來說）“默認情況下加密郵件”。

如果您發送電子郵件的大多數人使用PGP（或者您希望鼓勵他們這樣做），您可能希望默認加密。加密您發送的所有電子郵件是理想的，但這並不總是可行的。請記住，您只能將加密電子郵件發送給使用PGP的其他人，並且您需要將其公鑰放入鑰匙串中。對於大多數人來說，手動選擇加密您發送的每封電子郵件可能效果最佳。
![圖像](tool_pgposx17.png)

然後單擊“確定”以保存所有設置。

恭喜，您現在已經設置了Thunderbird和Enigmail！以下是一些快速指示：

- 您可以單擊菜單按鈕，將鼠標懸停在OpenPGP上，然後打開密鑰管理以查看內置於Enigmail的PGP密鑰管理器。它與GPG Keychain Access非常相似，您可以選擇使用它。
- 當您撰寫新郵件時，窗口右下角有兩個圖標：筆（數字簽名電子郵件）和密鑰（加密電子郵件）。如果圖標是金色，則意味著它們被選中，如果它們是銀色，則表示它們未被選中。單擊它們以切換簽名並加密您正在編寫的電子郵件。
![圖像](tool_pgposx18.png)